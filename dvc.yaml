stages:
  _check-env-py:
    cmd: calkit check environment --name py
    deps:
      - environment.yml
    outs:
      - .calkit/env-locks/py.yml:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _check-env-tex:
    cmd: calkit check environment --name tex
    deps: []
    outs:
      - .calkit/env-locks/tex.json:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  collect-data:
    cmd: calkit xenv -n py --no-check -- python 
      scripts/collect-data.py
    deps:
      - scripts/collect-data.py
      - .calkit/env-locks/py.yml
    outs:
      - data/raw/data.csv
    desc: Automatically generated from the 'collect-data' stage in 
      calkit.yaml. Changes made here will be overwritten.
  plot-voltage:
    cmd: calkit xenv -n py --no-check -- python 
      scripts/plot-voltage.py
    deps:
      - scripts/plot-voltage.py
      - data/raw/data.csv
      - .calkit/env-locks/py.yml
    outs:
      - figures/voltage-time-series.png
    desc: Automatically generated from the 'plot-voltage' stage in 
      calkit.yaml. Changes made here will be overwritten.
  copy-figures-to-paper-dir:
    cmd: bash --noprofile --norc -c "cp -rf figures references.bib 
      paper && rm paper/figures/.gitignore"
    deps:
      - figures
      - references.bib
    outs:
      - paper/figures:
          cache: false
          persist: false
      - paper/references.bib:
          cache: false
          persist: false
    desc: Automatically generated from the 'copy-figures-to-paper-dir'
      stage in calkit.yaml. Changes made here will be overwritten.
  build-paper:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd 
      -interaction=nonstopmode -pdf paper/paper.tex
    deps:
      - paper/paper.tex
      - paper/figures
      - references.bib
      - .calkit/env-locks/tex.json
    outs:
      - paper/paper.pdf
    desc: Automatically generated from the 'build-paper' stage in 
      calkit.yaml. Changes made here will be overwritten.
