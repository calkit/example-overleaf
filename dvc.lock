schema: '2.0'
stages:
  collect-data:
    cmd: calkit xenv -n py --no-check -- python scripts/collect-data.py
    deps:
    - path: .calkit/env-locks/py
      hash: md5
      md5: 47e7cb735e6154cff8471df005659039.dir
      size: 4452
      nfiles: 1
    - path: scripts/collect-data.py
      hash: md5
      md5: eeab1328ac4a9df2ef2452d32c1e6cce
      size: 424
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 6f63178549b38a2db4f37a4968f63eff
      size: 43652
  plot-voltage:
    cmd: calkit xenv -n py --no-check -- python scripts/plot-voltage.py
    deps:
    - path: .calkit/env-locks/py
      hash: md5
      md5: 47e7cb735e6154cff8471df005659039.dir
      size: 4452
      nfiles: 1
    - path: data/raw/data.csv
      hash: md5
      md5: 6f63178549b38a2db4f37a4968f63eff
      size: 43652
    - path: scripts/plot-voltage.py
      hash: md5
      md5: b6aecc253448164cc02116ec4ba40d96
      size: 323
    outs:
    - path: figures/voltage-time-series.png
      hash: md5
      md5: 2b103f4b9a3a9cc2bf3ebb35acc8a5e9
      size: 45304
  copy-figures-to-paper-dir:
    cmd: ' bash --noprofile --norc -c "cp -rf figures references.bib paper && rm paper/figures/.gitignore"'
    deps:
    - path: figures
      hash: md5
      md5: a469c2748d09412e12e24f4f7481ed7e.dir
      size: 45329
      nfiles: 2
    - path: references.bib
      hash: md5
      md5: 2fc1994a416f2c333bb576ad351f0fce
      size: 5856
    outs:
    - path: paper/figures
      hash: md5
      md5: 0c67c0f7e21114fe6c8dc3fb8b64a79b.dir
      size: 45304
      nfiles: 1
    - path: paper/references.bib
      hash: md5
      md5: 2fc1994a416f2c333bb576ad351f0fce
      size: 5856
  build-paper:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd -norc 
      -interaction=nonstopmode -silent -synctex=1 -pdf paper/paper.tex
    deps:
    - path: .calkit/env-locks/tex
      hash: md5
      md5: 3b9f1528f9c75f40f991cf8fef2c254e.dir
      size: 1195
      nfiles: 1
    - path: paper/figures
      hash: md5
      md5: 0c67c0f7e21114fe6c8dc3fb8b64a79b.dir
      size: 45304
      nfiles: 1
    - path: paper/paper.tex
      hash: md5
      md5: f40f9d9f3118cd4081e3bad9903822be
      size: 912
    - path: references.bib
      hash: md5
      md5: 2fc1994a416f2c333bb576ad351f0fce
      size: 5856
    outs:
    - path: paper/paper.pdf
      hash: md5
      md5: 894702f94d6b130e829fd6921f41b6f4
      size: 115445
  _check-env-py:
    cmd: calkit check environment --name py
    deps:
    - path: environment.yml
      hash: md5
      md5: ad47ccf7d6698b070bd66005f95f62af
      size: 120
    outs:
    - path: .calkit/env-locks/py
      hash: md5
      md5: 47e7cb735e6154cff8471df005659039.dir
      size: 4452
      nfiles: 1
  _check-env-tex:
    cmd: calkit check environment --name tex
    outs:
    - path: .calkit/env-locks/tex
      hash: md5
      md5: 3b9f1528f9c75f40f991cf8fef2c254e.dir
      size: 1195
      nfiles: 1
