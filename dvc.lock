schema: '2.0'
stages:
  collect-data:
    cmd: calkit xenv -n py --no-check -- python scripts/collect-data.py
    deps:
    - path: .calkit/env-locks/py.yml
      hash: md5
      md5: 163fbba5ab4a4b6d6bafc116b3cbec5f
      size: 4423
    - path: scripts/collect-data.py
      hash: md5
      md5: eeab1328ac4a9df2ef2452d32c1e6cce
      size: 424
    outs:
    - path: data/raw/data.csv
      hash: md5
      md5: 37d5404dd44749358a47715f42ee0d85
      size: 43619
  plot-voltage:
    cmd: calkit xenv -n py --no-check -- python scripts/plot-voltage.py
    deps:
    - path: .calkit/env-locks/py.yml
      hash: md5
      md5: 163fbba5ab4a4b6d6bafc116b3cbec5f
      size: 4423
    - path: data/raw/data.csv
      hash: md5
      md5: 37d5404dd44749358a47715f42ee0d85
      size: 43619
    - path: scripts/plot-voltage.py
      hash: md5
      md5: b6aecc253448164cc02116ec4ba40d96
      size: 323
    outs:
    - path: figures/voltage-time-series.png
      hash: md5
      md5: f148d29caca5cf043f5fda2d0f0a5d5b
      size: 43888
  copy-figures-to-paper-dir:
    cmd: bash --noprofile --norc -c "cp -rf figures paper && rm 
      paper/figures/.gitignore"
    deps:
    - path: figures
      hash: md5
      md5: 8666846133edb9c80922cbc2309924fe.dir
      size: 43913
      nfiles: 2
    outs:
    - path: paper/figures
      hash: md5
      md5: 7b4de8377a5b1103c5a9dd5fd955247d.dir
      size: 43888
      nfiles: 1
  build-paper:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd -interaction=nonstopmode 
      -pdf paper/paper.tex
    deps:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: 001292a471cb91b54d46eefb708d8f9c
      size: 3729
    - path: paper/figures
      hash: md5
      md5: 7b4de8377a5b1103c5a9dd5fd955247d.dir
      size: 43888
      nfiles: 1
    - path: paper/paper.tex
      hash: md5
      md5: b21f76eb1f9ab58940717d9b5165edf9
      size: 745
    outs:
    - path: paper/paper.pdf
      hash: md5
      md5: 2cdaf9f4e969fefd976618c3079f6b53
      size: 95594
  _check-env-py:
    cmd: calkit check conda-env --file environment.yml --output 
      .calkit/env-locks/py.yml
    deps:
    - path: environment.yml
      hash: md5
      md5: ad47ccf7d6698b070bd66005f95f62af
      size: 120
    outs:
    - path: .calkit/env-locks/py.yml
      hash: md5
      md5: 163fbba5ab4a4b6d6bafc116b3cbec5f
      size: 4423
  _check-env-tex:
    cmd: calkit check docker-env texlive/texlive:latest-full -o 
      .calkit/env-locks/tex.json
    outs:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: 001292a471cb91b54d46eefb708d8f9c
      size: 3729
